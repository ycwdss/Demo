<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>360导航</title>
    <style>
        html {
            height: 100%;
            overflow: hidden;
        }

        body {
            background: #f9f9f9;
        }

        #menu {
            width: 50px;
            height: 50px;
            position: fixed;
            right: 20px;
            bottom: 20px;
        }

        #menu_list {
            height: 42px;
            width: 42px;
            position: relative;
            margin: 4px;
        }

        #menu_list img {
            border-radius: 21px;
            position: absolute;
            left: 0;
            top: 0;
            border-radius: 21px;
        }

        #home {
            width: 50px;
            height: 50px;
            background: url(home.png) no-repeat;
            border-radius: 25px;
            position: absolute;
            left: 0;
            top: 0;
            transition: 1s;
        }
    </style>

</head>
<body>
<div id="menu">
    <div id="menu_list">
        <img src="prev.png" alt=""/>
        <img src="open.png" alt=""/>
        <img src="clos.png" alt=""/>
        <img src="full.png" alt=""/>
        <img src="refresh.png" alt=""/>
    </div>
    <div id="home"></div>
</div>
<script>
    window.onload = function () {
        var oHome = document.getElementById("home");
        var aImg=document.getElementById("menu_list").getElementsByTagName('img');
        var onOff = true;
        var iR=-150;
        /*给每个图标点击时间*/
        for(var i=0;i<aImg.length;i++){
            aImg[i].onclick=function () {
                this.style.transition="0.3s";
                this.style.WebkitTransform="scale(2) rotate(-720deg)";
                this.style.opacity=0.1;
                addEnd(this,end);
            };
        }
        function end()
        {
            this.style.transition="0.1s";
            this.style.WebkitTransform="scale(1) rotate(-720deg)";
            this.style.opacity=1;
            removeEnd(this,end);
        }

        /*点击旋转图标*/
        oHome.onclick = function () {
            if (onOff) {
                this.style.WebkitTransform = "rotate(-360deg)";
                for(var i=-0;i<aImg.length;i++){
                    var oLt=toLt(iR,90/4*i);
                    aImg[i].style.transition="0.5s "+100*i+"ms";
                    aImg[i].style.left=oLt.l+"px";
                    aImg[i].style.top=oLt.t+"px";
                    aImg[i].style.WebkitTransform="rotate(-720deg)";
                }
            } else {
                this.style.WebkitTransform = "rotate(0deg)";
                for(var i=0;i<aImg.length;i++)
                {
                    aImg[i].style.transition="0.5s "+(aImg.length-i-1)*100+"ms";
                    aImg[i].style.left=0+"px";
                    aImg[i].style.top=0+"px";
                    aImg[i].style.WebkitTransform="rotate(0deg)";
                }
            }
            onOff = !onOff;
        };
        function toLt(iR,iDeg) {
            var iLeft=Math.round(Math.sin(iDeg/180*Math.PI)*iR);
            var iTop=Math.round(Math.cos(iDeg/180*Math.PI)*iR);
            return{l:iLeft,t:iTop};
        }
        function addEnd(obj,fn)
        {
            obj.addEventListener('WebkitTransitionEnd',fn,false);
            obj.addEventListener('transitionend',fn,false);
        }
        function removeEnd(obj,fn)
        {
            obj.removeEventListener('WebkitTransitionEnd',fn,false);
            obj.removeEventListener('transitionend',fn,false);
        }
    };
</script>
</body>
</html>
